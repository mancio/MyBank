// https://dbdiagram.io/d/5d48262dced98361d6dd4e52

// App MyBank

Table bank{
  bank_ID int PK
  bank_details varchar(255)
}

Table branches{
  branch_ID int PK
  b_address_ID int
  bank_ID int
  branch_type_code varchar(10)
  branch_details varchar(255)
}

Table branch_services{
  branch_type_code varchar(10) PK
  service_list varchar(255)
}

Table user_addresses{
  u_address_ID int PK
  street varchar(255)
  city varchar(255)
  zip varchar(255)
  region varchar(255)
  country varchar(255)
  state varchar(255)
}

Table branch_addresses{
  b_address_ID int PK
  street varchar(255)
  city varchar(255)
  zip varchar(255)
  region varchar(255)
  country varchar(255)
  state varchar(255)
}

Table user {
  user_ID int PK
  username varchar(10) [unique]
  password varchar(50)
  access_status_code tinyint(1) [note: "1 ok, 0 banned"]
  name varchar(20)
  middle_name varchar(20)
  last_name varchar(20)
  phone_prefix int(5)
  phone int(20) [unique]
  mail varchar(20) [unique]
  u_address_ID int
  branch_ID int
}





Table bank_account {
  account_number int(50) PK
  country_code varchar(5)
  user_ID int
  balance decimal(50)

}



Table transaction {
  transaction_ID int PK
  sender_account_number int(50)
  transfer_date Date
  receiver_name varchar(255)
  receiver_account_number varchar(50)
  trans_amount decimal(50) [note: "do not use float"]
  trans_description varchar(255)
  trans_status varchar(255)

}



Ref: user.user_ID < bank_account.user_ID

Ref: bank_account.account_number < transaction.sender_account_number

Ref: bank.bank_ID < branches.bank_ID

Ref: branches.branch_ID < user.branch_ID
Ref: user.u_address_ID > user_addresses.u_address_ID

Ref: branches.b_address_ID > branch_addresses.b_address_ID


Ref: branch_services.branch_type_code < branches.branch_type_code





//OAuth2 Security standard database
Table user_role {
  user_role_ID int PK
  user_ID int
  role_ID varchar(255)
}

Table role {
  role_ID int PK
  role_name varchar(255)
}

Ref: user.user_ID < user_role.user_ID
Ref: user_role.role_ID > role.role_ID